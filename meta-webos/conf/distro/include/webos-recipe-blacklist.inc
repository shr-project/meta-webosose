# Copyright (c) 2013-2023 LG Electronics, Inc.

# A blacklisted recipe is ignored by bitbake. The reason it is useful to be able
# to have bitbake ignore a recipe is because, although PREFERRED_PROVIDER can be
# used to select which recipe is used to fulfill a build-time dependency, bitbake
# does not have a PREFERRED_RPROVIDER to allow specification of which package
# should be used to satisfy a run-time dependency. When two recipes both provide
# common packages, but one recipe provides additional packages that the other
# doesn't, then the only way to guarantee that the first recipe will never be
# used is to blacklist it.

# meta-qt6
SKIP_RECIPE[packagegroup-qt6-addons] ?= "rdepends on blacklisted qtcharts, qtdeviceutilities, qtapplicationmanager, qtinterfaceframework, qtconnectivity-tools, qtmultimedia"
SKIP_RECIPE[packagegroup-qt6-modules] ?= "rdepends on blacklisted packagegroup-qt6-addons"
SKIP_RECIPE[qtapplicationmanager] ?= "fails to build: Qt6::QWaylandEglPlatformIntegrationPlugi references non-existent qtapplicationmanager/6.4.1-r0/recipe-sysroot/usr/lib/plugins/platforms/libqwayland-egl.so http://gecko.lge.com:8000/Errors/Details/565731"
SKIP_RECIPE[qtdeviceutilities] ?= "fails to build with ninja: error: unknown target 'install' http://gecko.lge.com:8000/Errors/Details/565732"
SKIP_RECIPE[qtcharts] ?= "fails to build with ninja: error: unknown target 'install' http://gecko.lge.com:8000/Errors/Details/565734"
SKIP_RECIPE[qtconnectivity] ?= "fails to build with dbus and widgets disabled in qtbase: Failed to find optional Qt component DBus which is needed for bluetooth The DBus target is mentioned as a dependency for Bluetooth, but not declared.. http://gecko.lge.com:8000/Errors/Details/565738"
SKIP_RECIPE[qtdatavis3d] ?= "fails to build with ninja: error: unknown target 'install' http://gecko.lge.com:8000/Errors/Details/565733"
SKIP_RECIPE[qtmultimedia] ?= "fails to build: qtmultimedia/6.0.0-r1/git/src/qtmultimediaquicktools/qsgvideonode_texture.cpp:56:30: error: 'class QSGRhiSupport' has no member named 'isRhiEnabled'. http://gecko.lge.com:8000/Errors/Details/565741"
SKIP_RECIPE[qtpdf] ?= "fails to build with widgets disabled in qtbase: Failed to find required Qt component Widgets. http://gecko.lge.com:8000/Errors/Details/565740"
SKIP_RECIPE[qtwebengine] ?= "fails to build with printing-and-pdf PACKAGECONFIG enabled (default): ERROR: Feature 'webengine_printing_and_pdf': Forcing to 'ON' breaks its condition: TARGET Qt::PrintSupport AND QT_FEATURE_printer AND ( CUPS_FOUND OR WIN32 ) Condition values dump: TARGET Qt::PrintSupport not found QT_FEATURE_printer not evaluated CUPS_FOUND = 'TRUE' WIN32 = '' http://gecko.lge.com:8000/Errors/Details/565744"
SKIP_RECIPE[qtwebview] ?= "depends on blacklisted qtwebengine"
SKIP_RECIPE[qtinterfaceframework] ?= "depends on blacklisted qtmultimedia"

# meta-oe
SKIP_RECIPE[fwts] ?= "fails to build with: fwts/22.01.00-r0/build/src/lib/src/.libs/libfwts.so: error: undefined reference to 'gzgets' http://gecko.lge.com:8000/Errors/Details/565736"
SKIP_RECIPE[netplan] ?= "fails to build with gold: aarch64-webos-linux/11.3.0/ld: error: abicompat.lds:10:8: syntax error, unexpected STRING http://gecko.lge.com:8000/Errors/Details/565730"
SKIP_RECIPE[transmission] ?= "fails to fetch: WARNING: Failed to fetch URL gitsm://github.com/transmission/transmission;branch=master;protocol=https, attempting MIRRORS if available DEBUG: Fetcher failure: Unable to find revision bb6b5a062ee594dfd4b7a12a6b6e860c43849bfd in branch master even from upstream: http://gecko.lge.com:8000/Errors/Details/565717"
SKIP_RECIPE[vboxguestdrivers] ?= "BROKEN: kernel-module-vboxguest conflicts in pkgdata with the vboxguest kernel modules we have enabled in linux-yocto meta-webos/recipes-kernel/linux/linux-yocto/vbox_gfx.cfg:CONFIG_VBOXGUEST=m http://gecko.lge.com:8000/Errors/Details/565857"
SKIP_RECIPE[gutenprint] ?= "BROKEN: needs 'lp' group in base-passwd, chgrp added in https://git.openembedded.org/meta-openembedded/commit/?id=4d921bb5144b653c2f195fb2e8694a31dbd539f1"

# meta-networking
SKIP_RECIPE[networkmanager] ?= "fails to build with: NetworkManager-1.36.2/meson.build:821:4: ERROR: Assert failed: vala api require GObject introspection. Use -Dvapi=false to disable it: http://gecko.lge.com:8000/Errors/Details/565739"
SKIP_RECIPE[networkmanager-openvpn] ?= "depends on blacklisted networkmanager"
SKIP_RECIPE[networkmanager-openconnect] ?= "depends on blacklisted networkmanager"
SKIP_RECIPE[networkmanager-fortisslvpn] ?= "depends on blacklisted networkmanager"
SKIP_RECIPE[python3-networkmanager] ?= "rdepends on blacklisted networkmanager"

# meta-filesystems
SKIP_RECIPE[zfs] ?= "fails to package with multilib, fixed in: https://lists.openembedded.org/g/openembedded-devel/message/102313 and also fails to build for aarch64 with gcc-13 https://github.com/openzfs/zfs/issues/14624"

# meta-virtualization
SKIP_RECIPE[ceph] ?= "fails to build with: multiple definition of `boost::phoenix::placeholders::uarg*' even after fixing gcc-13 related issues in https://lists.yoctoproject.org/g/meta-virtualization/message/8040"
SKIP_RECIPE[python3-newrelic] ?= "fails to build with: FileExistsError: File already exists: TOPDIR/BUILD/work/raspberrypi4_64-webos-linux/python3-newrelic/6.2.0.156-r0/image/usr/bin/newrelic-admin http://gecko.lge.com:8000/Errors/Details/565723"
SKIP_RECIPE[runv] ?= "fails to build with: go: cannot find main module, but found .git/config in TOPDIR http://gecko.lge.com:8000/Errors/Details/565721"
SKIP_RECIPE[upx] ?= "fails to fetch: WARNING: Failed to fetch URL git://github.com/upx/upx-vendor-doctest;name=vendor_doctest;subdir=git/vendor/doctest;branch=upx-vendor;protocol=https, attempting MIRRORS if available, DEBUG: Fetcher failure: Unable to find revision 666e648b68fda2deb141a1fe93e3fd1e2795dd0f in branch upx-vendor even from upstream: http://gecko.lge.com:8000/Errors/Details/565718"
SKIP_RECIPE[xen-tools] ?= "${@bb.utils.contains('DISTRO_FEATURES', 'ld-is-gold', 'Fails to build with gold, aarch64-webos-linux/11.3.0/ld: error: mapfile-GNU:1:9: invalid use of VERSION in input file, details in https://lists.yoctoproject.org/g/meta-virtualization/message/5202 http://gecko.lge.com:8000/Errors/Details/565743', '', d)}"
SKIP_RECIPE[xen] ?= "${@bb.utils.contains('DISTRO_FEATURES', 'ld-is-gold', 'Fails to build with gold, aarch64-webos-linux-ld: internal error in output_address, at ../../gold/output.cc:3027, http://gecko.lge.com:8000/Errors/Details/565742"
SKIP_RECIPE[xtf] ?= "${@bb.utils.contains('DISTRO_FEATURES', 'ld-is-gold', 'Rdepends on blacklisted xen-tools-xl from xen-tools"
SKIP_RECIPE[xvisor] ?= "fails to fetch: WARNING: Failed to fetch URL git://github.com/avpatel/xvisor-next.git;branch=master;protocol=https, attempting MIRRORS if available DEBUG: Fetcher failure: Unable to find revision 6b23764a1439f9d08b2ed2f363da522460d8a22b in branch master even from upstream http://gecko.lge.com:8000/Errors/Details/565714"
SKIP_RECIPE[uxen-guest-tools] ?= "fails to build for x86 qemux86 qemux86_64-webos-linux/uxen-guest-tools/4.1.8-r0/uxen-4.1.8-72a4af9/vm-support/linux/uxenplatform/platform.c:110:13: error: conflicting types for 'add_hwgenerator_randomness'; have 'void(const char *, size_t,  size_t)' {aka 'void(const char *, long unsigned int,  long unsigned int)'} http://gecko.lge.com:8000/Errors/Details/576618"

# meta-clang
SKIP_RECIPE[compiler-rt-sanitizers] ?= "BROKEN: with webos DISTRO, Failed to find compiler-rt builtins library for x86_64-webos-linux"

# meta-raspberrypi
SKIP_RECIPE[rpidistro-vlc] ?= "Depends on faad2 which needs commercial license (and currently isn't in meta-webos/conf/distro/webos.conf LICENSE_FLAGS_ACCEPTED)"
