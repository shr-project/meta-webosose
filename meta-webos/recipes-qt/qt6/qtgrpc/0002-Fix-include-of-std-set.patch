From b30f421e6f32c9265ec50b563749d2cfd9df4adf Mon Sep 17 00:00:00 2001
From: Konrad Kujawa <konrad.kujawa@qt.io>
Date: Thu, 22 Jun 2023 15:30:20 +0200
Subject: [PATCH] Fix include of std::set

With new version of gRPC, compiler complains about missing include of
the std::set. Move include from .cpp to .h files.

Pick-to: 6.6
Change-Id: Ibfef277598cb9e620ab1b693a42564706302c9cc
Reviewed-by: Alexey Edelev <alexey.edelev@qt.io>
---
Upstream-Status: Backport [6.6.0 65a8796 Fix include of std::set]

 src/tools/qtgrpcgen/qgrpcgenerator.cpp         | 1 -
 src/tools/qtgrpcgen/qgrpcgenerator.h           | 3 ++-
 src/tools/qtprotobufgen/qprotobufgenerator.cpp | 5 ++---
 src/tools/qtprotobufgen/qprotobufgenerator.h   | 2 ++
 4 files changed, 6 insertions(+), 5 deletions(-)

diff --git a/src/tools/qtgrpcgen/qgrpcgenerator.cpp b/src/tools/qtgrpcgen/qgrpcgenerator.cpp
index 4bf29dd..ef2ce62 100644
--- a/src/tools/qtgrpcgen/qgrpcgenerator.cpp
+++ b/src/tools/qtgrpcgen/qgrpcgenerator.cpp
@@ -10,7 +10,6 @@
 #include "utils.h"
 #include "options.h"
 
-#include <set>
 #include <google/protobuf/compiler/code_generator.h>
 #include <google/protobuf/descriptor.h>
 #include <google/protobuf/io/printer.h>
diff --git a/src/tools/qtgrpcgen/qgrpcgenerator.h b/src/tools/qtgrpcgen/qgrpcgenerator.h
index 809925e..996d37c 100644
--- a/src/tools/qtgrpcgen/qgrpcgenerator.h
+++ b/src/tools/qtgrpcgen/qgrpcgenerator.h
@@ -4,8 +4,9 @@
 #ifndef QGRPCGENERATOR_H
 #define QGRPCGENERATOR_H
 
-#include <memory>
 #include "generatorbase.h"
+#include <memory>
+#include <set>
 
 namespace google::protobuf {
 class FileDescriptor;
diff --git a/src/tools/qtprotobufgen/qprotobufgenerator.cpp b/src/tools/qtprotobufgen/qprotobufgenerator.cpp
index bea7bf0..941ef97 100644
--- a/src/tools/qtprotobufgen/qprotobufgenerator.cpp
+++ b/src/tools/qtprotobufgen/qprotobufgenerator.cpp
@@ -12,11 +12,10 @@
 #include "utils.h"
 #include "options.h"
 
-#include <cassert>
-
 #include <array>
+#include <cassert>
 #include <numeric>
-#include <set>
+
 #include <google/protobuf/stubs/common.h>
 #include <google/protobuf/io/printer.h>
 #include <google/protobuf/io/zero_copy_stream.h>
diff --git a/src/tools/qtprotobufgen/qprotobufgenerator.h b/src/tools/qtprotobufgen/qprotobufgenerator.h
index 8aec33a..6239fd4 100644
--- a/src/tools/qtprotobufgen/qprotobufgenerator.h
+++ b/src/tools/qtprotobufgen/qprotobufgenerator.h
@@ -7,6 +7,8 @@
 
 #include "generatorbase.h"
 
+#include <set>
+
 namespace google::protobuf {
 class FileDescriptor;
 class Descriptor;
